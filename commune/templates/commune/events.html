{% extends 'commune/base.html' %}
{% load static %}

{% block content %}
<header>
    <style>
  body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: #fff;
      color: #333;
  }
  header {
      padding: 20px;
      text-align: center;
  }
  nav {
      display: flex;
      justify-content: center;
      gap: 15px;
  }
  nav a {
      text-decoration: none;
      color: #333;
  }
  h1 {
      text-align: center;
      margin-bottom: 10px;
  }
  section {
      width: 80%;
      margin: 0 auto;
      padding: 20px;
  }
  .box {
      border: 1px solid #ccc;
      padding: 15px;
      margin: 20px 0;
  }
  footer {
      text-align: center;
      padding: 20px;
      background-color: #f4f4f4;
      margin-top: 40px;
  }
</style>
  <!--img src="{% static 'img/pycon-black.jpg' %}" alt="Logo" /-->
  <nav>
      <a href="{% url 'index' %}">Home</a>
      <a href="{% url 'code_of_conduct' %}">Code of Conduct</a>
  </nav>
</header>
<h1>Events</h1>

        <!-- Full Screen Search Start -->
        <div class="modal fade" id="searchModal" tabindex="-1">
            <div class="modal-dialog modal-fullscreen">
                <div class="modal-content" style="background: rgba(29, 29, 39, 0.7);">
                    <div class="modal-header border-0">
                        <button type="button" class="btn bg-white btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body d-flex align-items-center justify-content-center">
                        <div class="input-group" style="max-width: 600px;">
                            <input type="text" class="form-control bg-transparent border-light p-3" placeholder="Type search keyword">
                            <button class="btn btn-light px-4"><i class="bi bi-search"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Full Screen Search End -->


        <!-- Events Start -->
        <section class="events">
            <div class="events-header">
                <h2>EVENTS</h2>
                <select class="event-filter" id="eventFilter" onchange="filterEvents(this.value)">
                    <option value="all">All events</option>
                    <option value="past">Past events</option>
                    <option value="upcoming">Upcoming events</option>
                    <option value="workshops">Workshops</option>
                    <option value="hackathons">Hackathons</option>
                </select>
                <button class="btn btn-primary" onclick="window.location.href='{% url 'create_event' %}'">Create Event</button>
            </div>
            <div class="events-list">
                {% for event in events %}
                <div class="event" data-date="{{ event.event_date|date:'Y-m-d' }}" data-type="event-type">
                    <h3>{{ event.event_date }}</h3>
                    <h4>{{ event.title }}</h4>
                    <p>{{ event.description }}</p>
                    <a href="{% url 'update_event' event.id %}" class="btn btn-warning">Edit</a>
                    <a href="{% url 'delete_event' event.id %}" class="btn btn-danger">Delete</a>
                </div>
                {% endfor %}
            </div>
        </section>
        <!-- Events End -->
         
<script>
    function filterEvents(filterType) {
        const events = document.querySelectorAll('.event');
        const today = new Date();
        
        events.forEach(event => {
            const eventDate = new Date(event.getAttribute('data-date'));
            
            // Reset visibility
            event.style.display = 'block';
            
            if (filterType === 'past') {
                // Hide events that are in the future
                if (eventDate >= today) {
                    event.style.display = 'none';
                }
            } else if (filterType === 'upcoming') {
                // Hide events that are in the past
                if (eventDate < today) {
                    event.style.display = 'none';
                }
            } else if (filterType === 'workshops' || filterType === 'hackathons') {
                // Implement filtering by event type if you have that data
                // This requires adding a data-type attribute to each event
                const eventType = event.getAttribute('data-type');
                if (eventType !== filterType) {
                    event.style.display = 'none';
                }
            }
            // For 'all', we've already reset all events to display:block
        });
    }
    
    // Initialize filtering when page loads
    document.addEventListener('DOMContentLoaded', function() {
        const filterSelect = document.getElementById('eventFilter');
        if (filterSelect) {
            filterEvents(filterSelect.value);
        }
    });
</script>
{% endblock %}